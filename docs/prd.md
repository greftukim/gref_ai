# 도매단가 수요 예측 웹페이지 기획서 (PRD)

**문서 버전**: 1.0
**작성일**: 2026-02-22
**상태**: 초안

---

## 1. 개요

### 1.1 제품 비전

상품별 도매단가 데이터를 기반으로 수요를 예측하고, 데이터 분석 대시보드를 통해 구매·영업 의사결정을 지원하는 웹 애플리케이션.

### 1.2 배경 및 목적

- 도매 시장에서 단가 변동과 수요 간의 상관관계를 직관적으로 파악하기 어려움
- 수작업 엑셀 분석에 의존하여 실시간 의사결정이 느림
- 단가 입력 → 예측 → 시각화를 단일 플랫폼에서 처리하여 업무 효율 향상

### 1.3 목표 사용자

| 사용자 유형 | 역할 | 주요 니즈 |
|---|---|---|
| 구매 담당자 | 상품 단가 입력 및 발주 계획 | 단가 변동 추이 및 적정 발주량 파악 |
| 영업 담당자 | 수요 예측 기반 영업 전략 수립 | 상품별 수요 예측 그래프 조회 |
| 경영진 | 전체 현황 모니터링 | 고수준 KPI 대시보드 |

---

## 2. 기능 요구사항

### 2.1 상품별 도매단가 입력

#### 2.1.1 핵심 기능

- **상품 등록**: 상품 코드, 상품명, 카테고리, 단위(kg/box/ea 등) 등록
- **단가 입력 폼**: 날짜별 도매단가 직접 입력 (단건 / 일괄 입력 지원)
- **엑셀 업로드**: CSV/XLSX 파일로 단가 데이터 일괄 가져오기
- **이력 관리**: 단가 변경 이력 조회 및 수정·삭제
- **유효성 검사**: 음수 단가 방지, 전일 대비 급등락(±30% 이상) 경고 알림

#### 2.1.2 입력 데이터 구조

```
상품 (Product)
├── 상품 ID (고유값)
├── 상품명
├── 카테고리
├── 단위
└── 단가 이력 (PriceHistory)
    ├── 날짜
    ├── 도매단가 (원)
    ├── 공급업체명 (선택)
    └── 비고
```

#### 2.1.3 UI 요구사항

- 상품 목록 테이블: 검색·필터·정렬 지원
- 인라인 단가 편집 (테이블에서 직접 수정)
- 날짜 범위 선택 달력 컴포넌트
- 모바일 반응형 지원

---

### 2.2 수요 예측 그래프

#### 2.2.1 예측 모델 요구사항

| 모델 | 설명 | 적용 조건 |
|---|---|---|
| 이동평균(MA) | 단순 단기 추세 | 데이터 30일 이상 |
| 지수평활(ETS) | 계절성 반영 | 데이터 90일 이상 |
| 선형 회귀 | 단가-수요 상관 분석 | 수요 실적 데이터 존재 시 |
| 사용자 정의 | 외부 요인 보정 계수 입력 | 수동 조정 필요 시 |

#### 2.2.2 그래프 기능

- **시계열 차트**: 실적 단가(실선) + 예측 단가(점선) 동시 표시
- **수요 예측 구간**: 95% 신뢰구간 음영 표시
- **단가-수요 산점도**: 상관관계 시각화
- **비교 분석**: 최대 5개 상품 동시 비교 오버레이
- **예측 기간 설정**: 7일 / 30일 / 90일 / 사용자 지정

#### 2.2.3 인터랙션

- 차트 확대·축소 (줌인/줌아웃)
- 특정 날짜 포인트 클릭 시 상세 데이터 툴팁 표시
- 차트 이미지/CSV 내보내기
- 예측값 수동 보정 후 재계산

---

### 2.3 데이터 분석 대시보드

#### 2.3.1 대시보드 구성

**상단 KPI 카드 (4개)**

| 지표 | 설명 |
|---|---|
| 전체 취급 상품 수 | 활성 상품 합계 |
| 금월 평균 단가 변동률 | 전월 대비 % |
| 예측 정확도 | MAPE 기준 모델 정확도 |
| 이상 단가 감지 수 | 금월 경고 발생 건수 |

**중단: 차트 패널 (2열 레이아웃)**

- 카테고리별 평균 단가 추이 (라인 차트)
- 상위 10개 상품 단가 순위 (수평 바 차트)
- 단가 변동률 히트맵 (월×상품 매트릭스)
- 예측 vs 실적 오차율 추이 (영역 차트)

**하단: 상세 데이터 테이블**

- 전체 상품 단가 현황 테이블
- 정렬, 필터, 페이지네이션 지원
- 행 클릭 시 해당 상품 상세 페이지 이동

#### 2.3.2 필터 및 제어

- 날짜 범위 전역 필터 (대시보드 전체 적용)
- 카테고리 멀티 선택 필터
- 공급업체 필터
- 대시보드 레이아웃 커스터마이징 (위젯 순서 변경)

#### 2.3.3 알림 및 리포트

- 단가 급변 실시간 알림 (브라우저 푸시 / 이메일)
- 주간/월간 PDF 리포트 자동 생성
- 슬랙 연동 알림 (선택 기능)

---

## 3. 비기능 요구사항

### 3.1 성능

| 항목 | 목표값 |
|---|---|
| 페이지 초기 로딩 | 3초 이내 (LCP) |
| 차트 렌더링 | 1초 이내 (데이터 1만 건 기준) |
| 예측 연산 응답 | 5초 이내 |
| 동시 접속자 | 100명 이상 지원 |

### 3.2 보안

- 사용자 인증: JWT 기반 로그인 (이메일 + 패스워드)
- 역할 기반 접근 제어(RBAC): 관리자 / 일반 사용자 / 뷰어
- 데이터 암호화: HTTPS(TLS 1.3), DB 민감 필드 암호화
- 입력 값 서버 사이드 유효성 검사

### 3.3 접근성 및 호환성

- WCAG 2.1 AA 기준 준수
- 지원 브라우저: Chrome 최신, Edge 최신, Safari 최신, Firefox 최신
- 반응형: 데스크탑(1280px+) / 태블릿(768px+) / 모바일(375px+)

---

## 4. 기술 스택 제안

| 영역 | 기술 | 선택 이유 |
|---|---|---|
| 프론트엔드 | React + TypeScript | 컴포넌트 재사용성, 타입 안정성 |
| 상태 관리 | Zustand 또는 React Query | 서버 상태와 UI 상태 분리 |
| 차트 라이브러리 | Recharts 또는 Apache ECharts | 시계열·히트맵 풍부한 지원 |
| 백엔드 | FastAPI (Python) | 데이터 분석 생태계 통합 용이 |
| 예측 엔진 | Prophet / statsmodels | 시계열 예측 라이브러리 |
| 데이터베이스 | PostgreSQL | 시계열 쿼리 성능 |
| 캐싱 | Redis | 예측 결과 캐싱 |
| 인프라 | Docker + Nginx | 배포 일관성 |

---

## 5. 화면 구성 (Information Architecture)

```
[루트]
├── /login              - 로그인
├── /dashboard          - 메인 대시보드 ★
├── /products           - 상품 목록
│   ├── /products/new   - 상품 등록
│   └── /products/:id   - 상품 상세
│       └── /products/:id/prices - 단가 이력
├── /forecast           - 수요 예측
│   └── /forecast/compare - 상품 비교 예측
├── /analytics          - 고급 분석
└── /settings           - 설정 (알림, 계정, 권한)
```

---

## 6. 주요 사용자 흐름 (User Flow)

### 플로우 1: 단가 입력

```
상품 목록 → 상품 선택 → [단가 입력] 탭 → 날짜·단가 입력 → 저장 → 이상값 경고 확인 → 확정
```

### 플로우 2: 수요 예측 조회

```
예측 메뉴 → 상품 검색·선택 → 예측 기간 설정 → 모델 선택 → [예측 실행] → 그래프 확인 → 내보내기
```

### 플로우 3: 대시보드 모니터링

```
대시보드 접속 → 날짜 범위 설정 → KPI 확인 → 이상 알림 클릭 → 해당 상품 상세 이동 → 원인 분석
```

---

## 7. 마일스톤

| 단계 | 기간 | 산출물 |
|---|---|---|
| Phase 1: 기반 구축 | 3주 | 프로젝트 셋업, 인증, DB 스키마, 상품 CRUD |
| Phase 2: 단가 입력 | 2주 | 단가 입력 UI, 유효성 검사, 엑셀 업로드 |
| Phase 3: 예측 그래프 | 3주 | 예측 엔진 연동, 차트 구현 |
| Phase 4: 대시보드 | 2주 | KPI 카드, 분석 차트, 알림 |
| Phase 5: QA·배포 | 2주 | 테스트, 성능 최적화, 운영 배포 |

**총 예상 기간**: 약 12주

---

## 8. 성공 지표 (KPI)

| 지표 | 목표 |
|---|---|
| 단가 입력 소요 시간 단축 | 기존 대비 50% 이상 감소 |
| 수요 예측 정확도 (MAPE) | 15% 이하 |
| 대시보드 일간 활성 사용자 | 목표 사용자의 80% 이상 |
| 시스템 가동률 | 99.5% 이상 (월간) |

---

## 9. 미결 사항 (Open Questions)

- [ ] 수요 실적 데이터 연동 방식: 자체 입력 vs ERP 시스템 API 연동
- [ ] 예측 모델 고도화: ML 모델(LSTM 등) 도입 여부
- [ ] 다국어 지원 범위 (한국어 전용 vs 다국어)
- [ ] 모바일 앱 별도 개발 여부

---

*이 문서는 팀 논의 및 요구사항 확정에 따라 지속 업데이트됩니다.*
